
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards: Consci√™ncia e Rela√ß√µes Raciais</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }

        /* Container que permite o efeito 3D */
        .flashcard-container {
            perspective: 1000px;
            height: 350px; /* Aumentado para acomodar 2 bot√µes e 2 √°reas de output */
        }

        /* O cart√£o real (frente e verso) */
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-radius: 12px;
        }

        /* Classe para virar o cart√£o */
        .is-flipped {
            transform: rotateY(180deg);
        }

        /* Frente e Verso do cart√£o */
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Oculta a face de tr√°s durante a rota√ß√£o */
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem; 
            border-radius: 12px;
            color: white;
            cursor: pointer;
            text-align: center;
            /* Garante renderiza√ß√£o de texto suave no verso */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        /* Estilo espec√≠fico para a parte de tr√°s */
        .flashcard-back {
            transform: rotateY(180deg);
            justify-content: flex-start; /* Alinha o conte√∫do ao topo para melhor disposi√ß√£o */
            padding-top: 1rem;
            overflow-y: auto;
        }
        
        /* Estilos para o texto de output da IA */
        .gemini-output-box {
            max-height: 100px;
            overflow-y: auto;
            text-align: left !important; /* Sobrescreve o alinhamento central do pai */
        }

        .icon-size {
            font-size: 3rem;
        }

        /* Ajustes responsivos para tamanho de texto em dispositivos m√≥veis */
        @media (max-width: 640px) {
            .flashcard-container {
                height: 380px; /* Aumentado um pouco mais para mobile */
            }
            .flashcard-front p {
                font-size: 0.95rem;
            }
            .flashcard-back p {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <header class="text-center mb-10">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800">30 Flashcards: Identidade, Lutas e Repara√ß√£o Racial</h1>
        <p class="text-lg text-gray-600 mt-2">Clique em qualquer cart√£o para ver a resposta. Use os bot√µes ‚ú® para gerar exemplos e quest√µes de debate com IA.</p>
    </header>

    <div id="flashcards-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 max-w-7xl mx-auto">
        <!-- Os cart√µes ser√£o injetados aqui pelo JavaScript -->
    </div>

    <script>
        // Vari√°veis de configura√ß√£o do Firebase (necess√°rias para o ambiente Canvas)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // Chave da API Gemini (mantida vazia para ser injetada pelo ambiente)
        const apiKey = "";
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        /**
         * Utility function to perform fetch with exponential backoff.
         * @param {string} url - The URL to fetch.
         * @param {Object} options - The fetch options.
         * @param {number} retries - Current retry count.
         * @returns {Promise<Response>}
         */
        async function fetchWithExponentialBackoff(url, options, retries = 0) {
            try {
                const response = await fetch(url, options);
                if (response.status === 429 && retries < 3) { // Too Many Requests
                    const delay = Math.pow(2, retries) * 1000;
                    console.warn(`429 received. Retrying in ${delay}ms...`);
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithExponentialBackoff(url, options, retries + 1);
                }
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response;
            } catch (error) {
                if (retries < 3) {
                    const delay = Math.pow(2, retries) * 1000;
                    console.warn(`Fetch error. Retrying in ${delay}ms...`);
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithExponentialBackoff(url, options, retries + 1);
                }
                throw error;
            }
        }

        /**
         * Calls the Gemini API to generate a contextually relevant example.
         * @param {string} topic - The topic of the card.
         * @param {string} definition - The definition of the concept.
         * @returns {Promise<string>} - The generated example text.
         */
        async function generateExample(topic, definition) {
            const systemPrompt = "Voc√™ √© um tutor de L√≠ngua Portuguesa e cidadania. Sua tarefa √© criar um exemplo conciso e contempor√¢neo, ou uma analogia clara, que ilustre o conceito fornecido, focando na realidade social brasileira. Use no m√°ximo 4 frases. O tom deve ser informativo e acess√≠vel para o n√≠vel secund√°rio.";
            const userQuery = `Conceito: ${topic}. Defini√ß√£o: ${definition}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const options = {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            };

            try {
                const response = await fetchWithExponentialBackoff(API_URL, options);
                const result = await response.json();
                
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    return text.trim();
                } else {
                    console.error('Gemini API returned no text.', result);
                    return "N√£o foi poss√≠vel gerar um exemplo. Tente novamente.";
                }

            } catch (error) {
                console.error('Erro ao chamar a API Gemini:', error);
                return "Erro de conex√£o ao gerar o exemplo. Verifique a consola.";
            }
        }

        /**
         * Calls the Gemini API to generate a critical thinking discussion question.
         * @param {string} topic - The topic of the card.
         * @param {string} definition - The definition of the concept.
         * @returns {Promise<string>} - The generated question text.
         */
        async function generateDiscussionQuestion(topic, definition) {
            const systemPrompt = "Voc√™ √© um professor de Sociologia e Cidadania. Sua tarefa √© criar uma pergunta de pensamento cr√≠tico, debate ou conex√£o com a atualidade brasileira com base no conceito fornecido. A pergunta deve ser aberta e desafiadora, adequada para uma discuss√£o em sala de aula de n√≠vel secund√°rio/ensino m√©dio. Use no m√°ximo 2 frases.";
            const userQuery = `Gere uma pergunta para discuss√£o sobre o conceito: ${topic} (${definition})`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };
            
            const options = {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            };

            try {
                const response = await fetchWithExponentialBackoff(API_URL, options);
                const result = await response.json();
                
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    return text.trim();
                } else {
                    console.error('Gemini API returned no text.', result);
                    return "N√£o foi poss√≠vel gerar a pergunta. Tente novamente.";
                }

            } catch (error) {
                console.error('Erro ao chamar a API Gemini:', error);
                return "Erro de conex√£o ao gerar a pergunta. Verifique a consola.";
            }
        }


        // Configura√ß√£o dos cart√µes com conte√∫do, cores e √≠cones/emojis
        const flashcardsData = [
            // --- 1. Racismo Estrutural, Institucional e Ambiental (5 cards) ---
            {
                topic: "Racismo Estrutural",
                question: "O que √© 'Racismo Estrutural'?",
                answer: "√â o conjunto de normas, pr√°ticas, h√°bitos e costumes que promovem a desigualdade e a discrimina√ß√£o racial, estando enraizado nas institui√ß√µes e na sociedade.",
                emoji: "‚öôÔ∏è",
                colorClass: "bg-red-600 hover:bg-red-700"
            },
            {
                topic: "Racismo Institucional",
                question: "Defina 'Racismo Institucional'.",
                answer: "Falha das institui√ß√µes p√∫blicas e privadas em prover servi√ßos ou oportunidades de forma equitativa, resultando em desvantagem para grupos raciais minorit√°rios.",
                emoji: "üè¢",
                colorClass: "bg-indigo-600 hover:bg-indigo-700"
            },
            {
                topic: "Racismo Ambiental",
                question: "O que significa 'Racismo Ambiental'?",
                answer: "Desigualdade que coloca comunidades minorit√°rias (muitas vezes negras) em √°reas mais expostas a riscos ambientais, como polui√ß√£o e falta de saneamento.",
                emoji: "üåç",
                colorClass: "bg-teal-600 hover:bg-teal-700"
            },
            {
                topic: "Racismo Institucional (Exemplo)",
                question: "D√™ um exemplo pr√°tico de Racismo Institucional na seguran√ßa p√∫blica.",
                answer: "A abordagem policial seletiva ou desproporcional, que vitimiza e criminaliza injustamente jovens e adultos negros em compara√ß√£o a outros grupos.",
                emoji: "üö®",
                colorClass: "bg-pink-600 hover:bg-pink-700"
            },
            {
                topic: "Racismo Ambiental (Exemplo)",
                question: "Qual o exemplo mais comum de Racismo Ambiental no Brasil?",
                answer: "A falta de saneamento b√°sico, coleta de lixo e acesso √† √°gua pot√°vel em comunidades perif√©ricas e quilombolas, majoritariamente negras.",
                emoji: "üíß",
                colorClass: "bg-lime-600 hover:bg-lime-700"
            },

            // --- 2. Pertencimento Racial e Autodeclara√ß√£o (5 cards) ---
            {
                topic: "Pertencimento Racial",
                question: "O que significa 'Pertencimento Racial'?",
                answer: "√â a identifica√ß√£o individual e coletiva com um grupo racial, influenciada por aspectos hist√≥ricos, sociais e culturais, fundamental para a constru√ß√£o da identidade.",
                emoji: "ü§ù",
                colorClass: "bg-green-600 hover:bg-green-700"
            },
            {
                topic: "Autodeclara√ß√£o",
                question: "Em que consiste a 'Autodeclara√ß√£o'?",
                answer: "√â o ato de o indiv√≠duo declarar sua pr√≥pria ra√ßa ou cor (preto, pardo, branco, amarelo ou ind√≠gena) para fins oficiais (IBGE, cotas), sendo um direito garantido.",
                emoji: "üë§",
                colorClass: "bg-blue-600 hover:bg-blue-700"
            },
            {
                topic: "Colorismo",
                question: "O que √© o fen√¥meno do Colorismo?",
                answer: "Hierarquiza√ß√£o de indiv√≠duos negros conforme a tonalidade da pele, privilegiando tons mais claros e criando divis√µes internas no movimento negro.",
                emoji: "üé®",
                colorClass: "bg-orange-600 hover:bg-orange-700"
            },
            {
                topic: "Negritude",
                question: "O que significa o conceito de Negritude?",
                answer: "Consci√™ncia e orgulho da identidade negra, valorizando a heran√ßa cultural africana e promovendo a auto-afirma√ß√£o pol√≠tica e social.",
                emoji: "‚úäüèø",
                colorClass: "bg-stone-600 hover:bg-stone-700"
            },
            {
                topic: "Bancas de Heteroidentifica√ß√£o",
                question: "Qual a fun√ß√£o das Bancas de Heteroidentifica√ß√£o?",
                answer: "Garantir que o sistema de cotas seja utilizado por quem realmente se enquadra nos crit√©rios raciais, combatendo a fraude na autodeclara√ß√£o.",
                emoji: "üßê",
                colorClass: "bg-amber-600 hover:bg-amber-700"
            },

            // --- 3. Conceitos de Combate e Repara√ß√£o (5 cards) ---
            {
                topic: "Repara√ß√£o Hist√≥rica",
                question: "Qual o objetivo da 'Repara√ß√£o Hist√≥rica'?",
                answer: "Busca corrigir e compensar os danos causados por s√©culos de escravid√£o e discrimina√ß√£o, atrav√©s de pol√≠ticas p√∫blicas como as cotas raciais e indeniza√ß√µes.",
                emoji: "‚öñÔ∏è",
                colorClass: "bg-yellow-600 hover:bg-yellow-700"
            },
            {
                topic: "Pacto da Branquitude",
                question: "O que √© o 'Pacto da Branquitude'?",
                answer: "Acordo impl√≠cito entre pessoas brancas para manter o status quo e os privil√©gios raciais, silenciando ou minimizando o racismo.",
                emoji: "ü§´",
                colorClass: "bg-purple-600 hover:bg-purple-700"
            },
            {
                topic: "Lugar de Fala",
                question: "O que significa 'Lugar de Fala'?",
                answer: "Conceito que enfatiza que a experi√™ncia da opress√£o (racial, de g√™nero, etc.) confere a quem a vive a autoridade de narr√°-la e teoriz√°-la.",
                emoji: "üó£Ô∏è",
                colorClass: "bg-cyan-600 hover:bg-cyan-700"
            },
            {
                topic: "Letramento Racial",
                question: "O que √© 'Letramento Racial'?",
                answer: "Capacidade de ler, interpretar e criticar as din√¢micas raciais da sociedade, reconhecendo a pr√≥pria posi√ß√£o e o funcionamento do racismo.",
                emoji: "üß†",
                colorClass: "bg-fuchsia-600 hover:bg-fuchsia-700"
            },
            {
                topic: "A√ß√µes Afirmativas",
                question: "Qual o prop√≥sito das A√ß√µes Afirmativas?",
                answer: "Medidas tempor√°rias e especiais para eliminar e prevenir a discrimina√ß√£o, acelerando a igualdade de participa√ß√£o em √°reas onde grupos minorit√°rios s√£o sub-representados.",
                emoji: "üìà",
                colorClass: "bg-violet-600 hover:bg-violet-700"
            },
            
            // --- 4. Personalidades Negras Hist√≥ricas (7 cards) ---
            {
                topic: "Carolina Maria de Jesus",
                question: "Qual a import√¢ncia da obra 'Quarto de Despejo'?",
                answer: "Livro-di√°rio que narra a dura vida na favela, sendo um dos mais importantes registros da Literatura de Den√∫ncia Social no Brasil, escrito por uma mulher negra.",
                emoji: "üìñ",
                colorClass: "bg-gray-700 hover:bg-gray-800"
            },
            {
                topic: "Luiza Mahin",
                question: "Quem foi Luiza Mahin?",
                answer: "L√≠der de revoltas de escravizados na Bahia, como a Revolta dos Mal√™s (1835), e m√£e do abolicionista Luiz Gama. S√≠mbolo de resist√™ncia.",
                emoji: "üáßüá∑",
                colorClass: "bg-red-700 hover:bg-red-800"
            },
            {
                topic: "Maria Felipa de Oliveira",
                question: "Qual o seu papel na Independ√™ncia do Brasil?",
                answer: "Hero√≠na da Independ√™ncia na Ilha de Itaparica, liderou um grupo de mulheres negras e ind√≠genas que lutou contra as tropas portuguesas invasoras.",
                emoji: "‚öîÔ∏è",
                colorClass: "bg-cyan-700 hover:bg-cyan-800"
            },
            {
                topic: "Ganga Zumba",
                question: "Ganga Zumba √© conhecido por qual feito?",
                answer: "Foi o primeiro l√≠der do Quilombo dos Palmares, o maior e mais famoso quilombo do per√≠odo colonial brasileiro.",
                emoji: "üëë",
                colorClass: "bg-orange-700 hover:bg-orange-800"
            },
            {
                topic: "Abdias Nascimento",
                question: "Em qual √°rea Abdias Nascimento se destacou?",
                answer: "Ativista, poeta, dramaturgo e pol√≠tico, um dos maiores defensores do pan-africanismo e da cultura negra no Brasil e fundador do Teatro Experimental do Negro (TEN).",
                emoji: "üé≠",
                colorClass: "bg-indigo-700 hover:bg-indigo-800"
            },
            {
                topic: "Milton Santos",
                question: "Qual sua contribui√ß√£o acad√™mica?",
                answer: "Um dos maiores ge√≥grafos brasileiros, conhecido por sua cr√≠tica √† globaliza√ß√£o e por desenvolver o conceito do 'Meio T√©cnico-Cient√≠fico-Informacional'.",
                emoji: "üó∫Ô∏è",
                colorClass: "bg-teal-700 hover:bg-teal-800"
            },
            {
                topic: "Dandara dos Palmares",
                question: "Qual seu legado de resist√™ncia?",
                answer: "Guerreira do Quilombo dos Palmares, companheira de Zumbi, conhecida por sua luta pela liberdade e por n√£o aceitar acordos de paz com o governo colonial.",
                emoji: "üõ°Ô∏è",
                colorClass: "bg-pink-700 hover:bg-pink-800"
            },

            // --- 5. Personalidades Negras da Atualidade (8 cards) ---
            {
                topic: "Djamila Ribeiro",
                question: "Qual sua principal √°rea de atua√ß√£o na filosofia?",
                answer: "Fil√≥sofa, ativista e feminista negra, autora de livros influentes como 'Pequeno Manual Antirracista', que populariza conceitos do feminismo negro.",
                emoji: "üí°",
                colorClass: "bg-gray-600 hover:bg-gray-700"
            },
            {
                topic: "Ta√≠s Ara√∫jo",
                question: "Qual barreira ela quebrou na TV brasileira?",
                answer: "Foi a primeira atriz negra a protagonizar uma novela na Rede Globo, 'Xica da Silva' (na Manchete) e 'Da Cor do Pecado' (na Globo), abrindo caminhos para outras atrizes.",
                emoji: "üì∫",
                colorClass: "bg-purple-700 hover:bg-purple-800"
            },
            {
                topic: "Concei√ß√£o Evaristo",
                question: "Qual conceito liter√°rio ela criou?",
                answer: "Criou o conceito de 'escreviv√™ncia', que une a experi√™ncia de vida (viv√™ncia) √† escrita, transformando a mem√≥ria e a hist√≥ria negra em literatura.",
                emoji: "üñäÔ∏è",
                colorClass: "bg-yellow-700 hover:bg-yellow-800"
            },
            {
                topic: "L√°zaro Ramos",
                question: "Al√©m de ator, qual o seu papel social?",
                answer: "Ator, diretor, escritor e apresentador, conhecido por seus trabalhos que abordam a quest√£o racial e por projetos educativos e de incentivo √† leitura para crian√ßas.",
                emoji: "üé¨",
                colorClass: "bg-blue-700 hover:bg-blue-800"
            },
            {
                topic: "Erika Hilton",
                question: "Qual seu marco na pol√≠tica brasileira?",
                answer: "√â a primeira mulher negra e trans a ser eleita deputada federal por S√£o Paulo, representando um avan√ßo na diversidade do Congresso Nacional.",
                emoji: "üè≥Ô∏è‚Äç‚ößÔ∏è",
                colorClass: "bg-green-700 hover:bg-green-800"
            },
            {
                topic: "Aza Njeri",
                question: "Em que √°rea Aza Njeri se destaca?",
                answer: "Fil√≥sofa, escritora e pesquisadora brasileira especializada em pensamento africano, feminismo e a di√°spora, com atua√ß√£o forte nas redes sociais e acad√™mica.",
                emoji: "üéì",
                colorClass: "bg-lime-700 hover:bg-lime-800"
            },
            {
                topic: "Gilberto Gil",
                question: "Qual a sua relev√¢ncia cultural e pol√≠tica?",
                answer: "M√∫sico, cantor, compositor e ex-Ministro da Cultura. Um dos fundadores do Tropicalismo e √≠cone da m√∫sica popular brasileira.",
                emoji: "üé∏",
                colorClass: "bg-fuchsia-700 hover:bg-fuchsia-800"
            },
            {
                topic: "Sueli Carneiro",
                question: "Qual sua principal contribui√ß√£o para o ativismo negro?",
                answer: "Fil√≥sofa e ativista, fundadora do Geled√©s - Instituto da Mulher Negra, uma das refer√™ncias mais importantes do feminismo negro no Brasil.",
                emoji: "üß©",
                colorClass: "bg-rose-600 hover:bg-rose-700"
            },
        ];

        const grid = document.getElementById('flashcards-grid');

        /**
         * Cria e insere o HTML para um √∫nico cart√£o.
         * @param {Object} card - Objeto com os dados do cart√£o.
         * @returns {void}
         */
        function createFlashcard(card) {
            const cardElement = document.createElement('div');
            cardElement.className = 'flashcard-container';
            
            // Gera um ID limpo e a cor base para os estilos
            const topicId = card.topic.replace(/\s/g, '-').replace(/[^\w-]/g, ''); 
            const colorBaseMatch = card.colorClass.match(/bg-([a-z]+)-\d{3}/);
            const colorBase = colorBaseMatch ? colorBaseMatch[1] : 'blue';

            cardElement.innerHTML = `
                <div class="flashcard-inner transition duration-500 ease-in-out">
                    <!-- Frente do Cart√£o (Pergunta) -->
                    <div class="flashcard-front ${card.colorClass} shadow-xl">
                        <div class="icon-size mb-4">${card.emoji}</div>
                        <h2 class="text-xl font-bold mb-2">${card.topic}</h2>
                        <p class="text-base font-semibold px-4">${card.question}</p>
                        <span class="absolute bottom-4 text-xs opacity-75">Clique para ver a resposta</span>
                    </div>

                    <!-- Verso do Cart√£o (Resposta e Funcionalidade Gemini) -->
                    <div class="flashcard-back ${card.colorClass} shadow-xl text-left">
                        <h3 class="text-lg font-bold mb-3 w-full border-b pb-2">Resposta: ${card.topic}</h3>
                        <p class="text-sm sm:text-base mb-4">${card.answer}</p>
                        
                        <!-- Bot√µes de IA -->
                        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full justify-center mb-2">
                            <!-- Bot√£o 1: Exemplo Pr√°tico -->
                            <button id="gemini-btn-example-${topicId}" 
                                    class="generate-example-btn flex-grow bg-white text-${colorBase}-600 font-bold py-2 px-3 rounded-full shadow-lg transition duration-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-xs sm:text-sm"
                                    data-topic="${card.topic}"
                                    data-answer="${card.answer}">
                                Gerar Exemplo Pr√°tico ‚ú®
                            </button>
                            <!-- Bot√£o 2: Pergunta para Discuss√£o -->
                            <button id="gemini-btn-discussion-${topicId}" 
                                    class="generate-discussion-btn flex-grow bg-white text-${colorBase}-600 font-bold py-2 px-3 rounded-full shadow-lg transition duration-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-xs sm:text-sm"
                                    data-topic="${card.topic}"
                                    data-answer="${card.answer}">
                                Pergunta para Discuss√£o ‚ú®
                            </button>
                        </div>

                        <!-- Output 1: Exemplo Pr√°tico -->
                        <div id="gemini-output-example-${topicId}" class="mt-2 p-3 bg-white bg-opacity-10 rounded-lg w-full text-xs sm:text-sm text-white gemini-output-box" style="min-height: 25px;">
                            <!-- O exemplo gerado aparecer√° aqui -->
                        </div>
                        
                        <!-- Output 2: Pergunta para Discuss√£o -->
                        <div id="gemini-output-discussion-${topicId}" class="mt-2 p-3 bg-white bg-opacity-10 rounded-lg w-full text-xs sm:text-sm text-white gemini-output-box" style="min-height: 25px;">
                            <!-- A pergunta de discuss√£o aparecer√° aqui -->
                        </div>
                    </div>
                </div>
            `;

            // Adiciona o evento de clique para virar o cart√£o
            cardElement.addEventListener('click', (e) => {
                // Previne que o clique nos bot√µes de IA vire o cart√£o
                if (!e.target.classList.contains('generate-example-btn') && !e.target.classList.contains('generate-discussion-btn')) {
                    const inner = cardElement.querySelector('.flashcard-inner');
                    inner.classList.toggle('is-flipped');
                }
            });

            // --- Event Listener para Gerar Exemplo Pr√°tico ---
            const generateExampleButton = cardElement.querySelector('.generate-example-btn');
            const outputExampleDiv = cardElement.querySelector(`#gemini-output-example-${topicId}`);
            
            generateExampleButton.addEventListener('click', async () => {
                const topic = generateExampleButton.getAttribute('data-topic');
                const answer = generateExampleButton.getAttribute('data-answer');
                
                outputExampleDiv.innerHTML = 'A processar... Por favor, aguarde. ‚è≥';
                generateExampleButton.disabled = true;
                generateExampleButton.classList.add('opacity-50');

                const example = await generateExample(topic, answer);

                outputExampleDiv.innerHTML = `<span class="font-bold">Exemplo Gerado:</span> ${example}`;
                generateExampleButton.disabled = false;
                generateExampleButton.classList.remove('opacity-50');
            });

            // --- Event Listener para Gerar Pergunta para Discuss√£o ---
            const generateDiscussionButton = cardElement.querySelector('.generate-discussion-btn');
            const outputDiscussionDiv = cardElement.querySelector(`#gemini-output-discussion-${topicId}`);

            generateDiscussionButton.addEventListener('click', async () => {
                const topic = generateDiscussionButton.getAttribute('data-topic');
                const answer = generateDiscussionButton.getAttribute('data-answer');
                
                outputDiscussionDiv.innerHTML = 'A processar... Por favor, aguarde. ‚è≥';
                generateDiscussionButton.disabled = true;
                generateDiscussionButton.classList.add('opacity-50');

                const question = await generateDiscussionQuestion(topic, answer);

                outputDiscussionDiv.innerHTML = `<span class="font-bold">Pergunta Gerada:</span> ${question}`;
                generateDiscussionButton.disabled = false;
                generateDiscussionButton.classList.remove('opacity-50');
            });

            grid.appendChild(cardElement);
        }

        // Gera todos os cart√µes na inicializa√ß√£o
        flashcardsData.forEach(createFlashcard);
    </script>
</body>
</html>